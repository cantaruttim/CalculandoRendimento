<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <title>Calculando Rendimento</title>
</head>

<body>
    <main>
        <h1>Calculando o Rendimento Acertos</h1> <br>
        <div>
            <button value="resultado" name="resultados" id="resultado">Resultado</button>
            <button value="porcentagem" name="porcentagem" id="porcentagem">porcentagem</button>

        </div>
        <div id="resultados">

            <form id="fm" action="#" method="post">

                <input type="number" name="total" id="total" placeholder="Total de questões?"> <br>
                <input type="number" name="acertos" id="acertos" placeholder="Acertos ... "> <br>

            </form>
            <hr>

            <section id="grafico">

            </section>

            <section id="disciplinas">

                <h3> <i> Selecione a Matéria </i></h3>

                <!-- Exatas -->
                <label for="mat">Matemática</label>
                <input type="radio" name="materia" id="mat" checked> <br>
                <label for="qui">Química</label>
                <input type="radio" name="materia" id="qui"> <br>
                <label for="fis">Física</label>
                <input type="radio" name="materia" id="fis"> <br>

                <!-- Biológicas -->
                <label for="bio">Biologia</label>
                <input type="radio" name="materia" id="bio"> <br>

                <!-- Humanas -->

                <label for="soc">Sociologia</label>
                <input type="radio" name="materia" id="soc"> <br>
                <label for="his">História</label>
                <input type="radio" name="materia" id="his"> <br>
                <label for="geo">Geografia</label>
                <input type="radio" name="materia" id="geo"> <br>
                <label for="filo">Filosofia</label>
                <input type="radio" name="materia" id="filo"> <br>

                <!-- Idiomas -->

                <label for="port">Português</label>
                <input type="radio" name="materia" id="port"> <br>
                <label for="ing">Inglês</label>
                <input type="radio" name="materia" id="ing"> <br>
                <label for="espa">Espanhol</label>
                <input type="radio" name="materia" id="espa"> <br>

            </section>
        </div>

        <footer>
            <p> <i> <strong> Projeto </strong> criado por <strong> Matheus Cantarutti </strong> </i></p>
            <audio src="audio/audioTeste.mp3" controls></audio>
        </footer>


    </main>

    <script>

        // variáveis

        //  var total = document.getElementById('total');
        // var acertos = document.getElementById('acertos');


        // estilo do formulário: 
        var fm = document.forms[0];
        var el = fm.elements;

        for (var i = 0; i < el.length; i++) {
            el[i].style.backgroundColor = '#ddd'
        }

        // mostrando o valor obtido na tela

        const resultado = document.querySelector('#resultado')

        resultado.addEventListener("click", function (r) {
            r.preventDefault();

            const total = document.querySelector('#total');
            const total_valor = total.value;

            const acertos = document.querySelector('#acertos');
            const total_acertos = acertos.value;

            // indices das matérias vão de 0 a 10:

            var materia = document.getElementsByName('materia')
            var nomeD = ' '

            if (materia[0].checked) {
                nomeD = 'Matemática'
                document.write(nomeD)
            } else if (materia[1].checked) {
                nomeD = 'Química'
                document.write(nomeD)
            } else if (materia[2].checked) {
                nomeD = 'Física'
                document.write(nomeD)
            } else if (materia[3].checked) {
                nomeD = 'Biologia'
                document.write(nomeD)

            } else if (materia[4].checked) {
                nomeD = 'Sociologia'
                document.write(nomeD)

            } else if (materia[5].checked) {
                nomeD = 'História'
                document.write(nomeD)

            } else if (materia[6].checked) {
                nomeD = 'Geografia'
                document.write(nomeD)

            } else if (materia[7].checked) {
                nomeD = 'Filosofia'
                document.write(nomeD)

            } else if (materia[8].checked) {
                nomeD = 'Inglês'
                document.write(nomeD)

            } else if (materia[9].checked) {
                nomeD = 'Espanhol'
                document.write(nomeD)

            } else {
                document.write('Escolha uma matéria!')
            }

            // Plotando os resultados inseridos

            var x = [total_valor]
            var y = [total_acertos]

            var trace1 = {
                x: ['questões'],
                y: [total_valor],
                name: 'Total Questões',
                type: 'bar'
            };

            var trace2 = {
                x: ['acertos'],
                y: [total_acertos],
                name: 'Total Acertos',
                type: 'bar'
            };

            var data = [trace1, trace2];

            var layout = { barmode: 'stack' };

            Plotly.newPlot('grafico', data, layout);


        })

    </script>
</body>

</html>